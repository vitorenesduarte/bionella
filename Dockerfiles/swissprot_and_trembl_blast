FROM vitorenesduarte:swissprot_blast

MAINTAINER Vitor Enes Duarte <vitorenesduarte@gmail.com>

ENV BLAST_SRC "ncbi-blast-2.5.0+"
ENV BLASTDB "/root/blastdb"
ENV UNIPROT_FTP "ftp://ftp.uniprot.org/pub/databases/uniprot/current_release/knowledgebase/complete/"
ENV TREMBL_FASTA "uniprot_trembl.fasta"


# Use bash instead of sh
RUN rm /bin/sh && ln -s /bin/bash /bin/sh

# Download UniprotKB TrEMBL
RUN cd $BLASTDB && \
    wget -q $UNIPROT_FTP$TREMBL_FASTA".gz" && \
    gunzip $TREMBL_FASTA".gz" && \
    /root/$BLAST_SRC/bin/makeblastdb -in $TREMBL_FASTA -input_type fasta -dbtype prot -title trembl -out trembl && \
    rm -f $TREMBL_FASTA
